<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vượt Chướng Ngại Vật</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="circles">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
    </div>

    <div class="main-wrapper">
        <div class="container glass-effect">
            <div id="screen-start" class="screen active">
                <div class="logo-area">
                    <i class="fas fa-rocket rocket-icon"></i>
                </div>
                <h1>Vòng Thi Vượt Chướng Ngại Vật</h1>
                <p class="subtitle">Kiến thức là sức mạnh</p>
                
                <div class="input-group">
                    <div class="input-field">
                        <i class="fas fa-user"></i>
                        <input type="text" id="input-name" placeholder="Tên Tổ/Nhóm" autocomplete="off" required>
                    </div>
                    <div class="input-field">
                        <i class="fas fa-graduation-cap"></i>
                        <input type="text" id="input-class" placeholder="Tên Lớp (VD: 11A1)" autocomplete="off" required>
                    </div>
                    <div class="input-field">
                        <i class="fas fa-key"></i>
                        <input type="text" id="input-code" placeholder="Mã vào thi (Do GV cấp)" autocomplete="off" required>
                    </div>

                    <div class="button-group-vertical">
                        <button onclick="startQuiz()" class="btn-main pulse-anim">
                            Bắt đầu ngay <i class="fas fa-arrow-right"></i>
                        </button>
                        <button onclick="openRules()" class="btn-secondary">
                            <i class="fas fa-book"></i> Xem luật chơi & Cách tính điểm
                        </button>
                    </div>
                </div>
            </div>

            <div id="screen-quiz" class="screen">
                <div class="quiz-header">
                    <div class="stats-box">
                        <div class="stat-item timer-box">
                            <i class="far fa-clock"></i> <span id="timer">00:00</span>
                        </div>
                        <div class="stat-item streak-box">
                            <i class="fas fa-fire"></i> <span id="streak-display">0</span>
                        </div>
                    </div>
                    <div class="progress-track">
                        <div id="progress-bar"></div>
                    </div>
                </div>

                <div id="question-container">
                    <div class="question-box">
                        <h2 id="question-text">Đang tải câu hỏi...</h2>
                    </div>
                    <div id="answer-options" class="options-grid"></div>
                </div>
                <div id="feedback" class="feedback-msg"></div>
            </div>

            <div id="screen-result" class="screen">
                <canvas id="confetti-canvas"></canvas>
                <h2>Hoàn thành xuất sắc!</h2>
                
                <div class="score-card">
                    <div class="score-circle">
                        <span id="final-score">0</span>
                        <small>Điểm</small>
                    </div>
                    <div class="result-details">
                        <p><i class="far fa-clock"></i> Thời gian: <span id="total-time">0s</span></p>
                        <p><i class="fas fa-star"></i> Xếp hạng: <span id="rank-text">--</span></p>
                    </div>
                </div>

                <div class="result-actions">
                    <button onclick="showLeaderboard()" class="btn-secondary"><i class="fas fa-trophy"></i> BXH</button>
                    <button onclick="reviewQuiz()" class="btn-secondary"><i class="fas fa-eye"></i> Xem lại</button>
                    </div>
            </div>

            <div id="screen-leaderboard" class="screen">
                <h2><i class="fas fa-crown text-warning"></i> Bảng Vàng</h2>
                <div class="table-wrapper">
                    <table id="leaderboard-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Tên Nhóm</th>
                                <th>Điểm</th>
                                <th>Thời gian</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body"></tbody>
                    </table>
                </div>
                <button onclick="showScreen('screen-result')" class="btn-main mt-20">Quay lại</button>
            </div>

            <div id="screen-review" class="screen">
                <h2>Chi tiết đáp án</h2>
                <div id="review-list" class="custom-scrollbar"></div>
                <button onclick="showScreen('screen-result')" class="btn-main sticky-bottom">Đóng</button>
            </div>
        </div>
    </div>

    <div id="rules-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-scroll"></i> Luật Chơi</h2>
                <button onclick="closeRules()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body custom-scrollbar">
                <h3>1. Cách tham gia</h3>
                <p>- Nhập tên Tổ/Nhóm, tên Lớp và <strong>Mã Lớp</strong> chính xác do giáo viên cung cấp để vào thi.</p>
                <p>- Mỗi nhóm chỉ nên làm bài 1 lần để đảm bảo công bằng.</p>
                
                <h3>2. Cách tính điểm</h3>
                <ul style="list-style-type: disc; padding-left: 20px; line-height: 1.6;">
                    <li><strong>Điểm cơ bản:</strong> +10 điểm cho mỗi câu trả lời đúng.</li>
                    <li><strong>Điểm tốc độ:</strong> Trả lời càng nhanh, điểm thưởng càng cao (tối đa +5 điểm).</li>
                    <li><strong>Điểm chuỗi (Streak):</strong> Trả lời đúng liên tiếp sẽ được cộng thêm điểm thưởng (Streak x 2).</li>
                    <li><strong>Trả lời sai:</strong> Không bị trừ điểm nhưng chuỗi thắng (Streak) sẽ quay về 0.</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button onclick="closeRules()" class="btn-main">Đã hiểu</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
